<!DOCTYPE html>
<html lang="en">
<head>
 <meta charset="utf-8">
 <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
 <meta name="description" content="Cereal Manufacturer analysis">
 <meta name="author" content="ashnaanil">
 <title> CS 416 Final Project (aanil2) </title>
 <link href="cereal.css" rel="stylesheet">
</head>

	
<body id="Top">	
<nav class="navbar navbar-expand-lg navbar-dark bg-primary fixed-top" id="sideNav" color="#bd5d38">
        <span class="d-none d-lg-block">
          <img class="img-fluid img-profile rounded-circle mx-auto mb-2" src="cereal-ranked.jpg" width = "200" height = "180" alt="">
       </span>
<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
 <span class="navbar-toggler-icon"></span>
</button>
	<div class="collapse navbar-collapse" id="navbarSupportedContent">
	<ul class="navbar-nav" style="list-style: none;">
  		<li class="nav-item">
  		<a class="nav-link " href="#Overview">Overview</a>
  		</li>
  		<li class="nav-item">
   		<a class="nav-link " href="#Stats">Cereal Manufacturer Stats</a>
  		</li>
  		<li class="nav-item">
   		<a class="nav-link" href="#marketvalue">Market Value</a>
  		</li>
        </ul>
	</div>
  </nav>
	
	
<div>
      <section id="Overview">
      	<h1> Overview </h1>
          <div>
		  Vizualiation about factors such as average rating, calories, sugars etc... of cereals by cereal manufacturers.
          </div>
      <article>
            <h4> CEREAL MANUFACTURERS </h4>
            <ul>
		    <li> A = American Home Food Products </li>
		    <li> K = General Mills </li>
		    <li> N = Kelloggs </li>
		    <li> P = Nabisco </li>
		    <li> Q = Post </li>
		    <li> R = Quaker Oats </li>
		    <li> A = Ralston Purina </li>
            <ul>
		    <p> Sources </p>
		    https://d3-graph-gallery.com/graph/scatter_basic.html
		    </br>
		    https://www.kaggle.com/datasets/crawford/80-cereals
      </article>
      <br>
      <a class="button" href="#Stats" font-size='40px'> Next </a>
	<br>
       <a class="button" href="#Top" font-size='40px'> Return </a>
      <br>
      </section>
</div>
	      

<div>		
	<section class = "p-3 p-lg-5 d-flex d-column" id = "Stats">
	  <h2>Cereal Manufacturer Statistics</h2>
            <svg id='svg-2' width='1000' height="600"float="left" ></svg>
            <svg id='svg-3' width='1000' height="600"float="left" display='none'></svg>
	    <br>
            <button class='button' onclick="showcalories();" > Manufacturer By Calories </button>
            <button class='button' onclick="showratings();">Manufacturer By Ratings </button>
	    <br>
	    <a class="button" href="#marketvalue" font-size='40px'> Next </a>
	    <br>
            <a class="button" href="#Top" font-size='40px'> Return </a>
        </section>
</div>

<div>
   <section class=" p-3 p-lg-5 d-flex d-column" id="marketvalue">
          <h2>Market Value</h2>
          <svg id='svg-4' width='1000' height="600"float="left"></svg>
          <h4> This indicates the relationship between Ratings and Calories </h4>
	  <br>
          <a class="button" href="#Sources" font-size='40px'> Next </a>
          <br>
          <a class="button" href="#Top" font-size='40px'> Return </a>
	</section>
</div>
		
<script src="https://d3js.org/d3.v4.min.js"></script>	      
<script>

// show the ratings graph
    function showratings(){
     	var y = document.getElementById("svg-2")
     	y.style.display="none"
     	var z=document.getElementById("svg-3")
     	z.style.display="block"
     }

// show the calories graph
    function showcalories(){
       	var y = document.getElementById("svg-2")
       	y.style.display="block"
       	var z=document.getElementById("svg-3")
       	z.style.display="none"
    }

  // declaring svgs
  var svg2 = d3.select("#svg-2") 
  var svg3 = d3.select('#svg-3') 
  var svg4 = d3.select('#svg-4') 
  
  // setting parameters
  var margin = {top: 10, right: 30, bottom: 40, left: 70}
  var width = +svg2.attr("width") - margin.left - margin.right
  var height = +svg2.attr("height") - margin.top - margin.bottom
  
  // declaring group objects
  var g2 = svg2.append("g").attr("transform", "translate(" + margin.left + "," + margin.top + ")");
  var g3 = svg3.append("g").attr("transform", "translate(" + margin.left + "," + margin.top + ")");
  var g4 = svg4.append("g").attr("transform", "translate(" + margin.left + "," + margin.top + ")");

  // declaring scales
  var x = d3.scaleBand().rangeRound([0, width]).paddingInner(0.1);
  var y = d3.scaleLinear().rangeRound([height, 0]);
  var x1 = d3.scaleLinear().range([-0, width]).domain([0, 100]);
  var y1 = d3.scaleLinear().range([height, 0]).domain([0, 200]);

	
   //mfr vs calories chart
    d3.csv("cereal.csv", function(d) {
      return d;
    }, function(error, data) {
      if (error) throw error;
      x.domain(data.map(function(d) { return d.mfr; }));
      y.domain([0, 200]);
      g2.append("g")
	 .selectAll(".bar")
	    .data(data)
	    .enter()
	    .append("rect")
	    .attr("class", "bar")
	    .attr("x", function(d) { return x(d.mfr); })
	    .attr("y", function(d) { return y(d.calories); })
	    .attr("width", x.bandwidth())
	    .attr("height", function(d) { return height - y(d.calories); });  	      
      g2.append("g")
          .attr("class", "axis")
          .call(d3.axisBottom(x))
          .attr("transform", "translate(0," + height + ")")
          .append("text")
          .attr("x",2)
          .attr("y",0)
          .attr("fill","#000")
          .attr("font-weight","bold")
          .attr("text-anchor","start")
          .text("Mfr Name");
      g2.append("g")
          .attr("class", "axis")
          .call(d3.axisLeft(y).ticks(null, "s"))
        .append("text")
          .attr("x", 2)
          .attr("y", y(y.ticks().pop()) + 0.5)
          .attr("dy", "0.32em")
          .attr("fill", "#000")
          .attr("font-weight", "bold")
          .attr("text-anchor", "start")
          .text("Calories");
    });
	
      
    //mfr vs ratings chart
    d3.csv("cereal.csv", function(d) {
      return d;
    }, function(error, data) {
      if (error) throw error;
      x.domain(data.map(function(d) { return d.mfr; }));
      y.domain([0, 100]);
      g3.append("g")
	 .selectAll(".bar")
	    .data(data)
	    .enter()
	    .append("rect")
	    .attr("class", "bar")
	    .attr("x", function(d) { return x(d.mfr); })
	    .attr("y", function(d) { return y(d.rating); })
	    .attr("width", x.bandwidth())
	    .attr("height", function(d) { return height - y(d.rating); });   	  
      g3.append("g")
          .attr("class", "axis")
          .call(d3.axisBottom(x))
          .attr("transform", "translate(0," + height + ")")
          .append("text")
          .attr("x",2)
          .attr("y",0)
          .attr("fill","#000")
          .attr("font-weight","bold")
          .attr("text-anchor","start")
          .text("Mfr Name");
      g3.append("g")
          .attr("class", "axis")
          .call(d3.axisLeft(y).ticks(null, "s"))
        .append("text")
          .attr("x", 2)
          .attr("y", y(y.ticks().pop()) + 0.5)
          .attr("dy", "0.32em")
          .attr("fill", "#000")
          .attr("font-weight", "bold")
          .attr("text-anchor", "start")
          .text("Ratings");
    });
	
    //ratings vs calories
    d3.csv("cereal.csv", function(d) {
      return d;
    }, function(error, data) {
      if (error) throw error;
      g4.append("g")
	    .selectAll("dot")
	    .data(data)
	    .enter()
	    .append("circle")
	    .attr("cx", function(d) {return x1(d.rating); })
	    .attr("cy", function(d) {return y1(d.calories); })
	    .attr("r", 1.5)
	    .style("fil", "#69b3a2")
      g4.append("g")
          .call(d3.axisLeft(y1))
          .append("text")
          .attr("fill", "#000")
          .attr("transform", "rotate(-90)")
          .attr("y", 10)
          .attr("dy", "1em")
          .attr("text-anchor", "end")
          .text("Calories");
     g4.append("g")
          .call(d3.axisBottom(x1))
	  .attr("transform", "translate(0," + height + ")")
	  .append("text")
          .attr("x",width/2)
          .attr("y",-5)
          .attr("fill","#000")
          .attr("font-weight","bold")
          .attr("text-anchor","start")
          .text("Ratings");
     
    });
	
	
//selecting top10	
d3.csv("cereal.csv", function(d) {
    return d;
},  function(error, data) {
        if (error) throw error;
    var topData = data.sort(function(a, b) {
          return d3.descending(+a.name, +b.name);
       }).slice(0, 10);//top 10 here
    var p = d3.select("body")
      .selectAll("p")
      .data(topData)
      .enter()
      .append("p")
      .text(function(d){
        return d.name;
      });
    });
	

    </script>

  </body>

</html>

