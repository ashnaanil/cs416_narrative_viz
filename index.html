<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="Mohamed salah player analysis">
<meta name="author" content="ashnaanil">
<title> CS 498 Final Project. Aanil2</title>
	    <link href="css/salah.min.css" rel="stylesheet">
</head>

<body id="Top">
<nav class="navbar navbar-expand-lg navbar-dark bg-primary fixed-top" id="sideNav">
        <span class="d-none d-lg-block">
          <img class="img-fluid img-profile rounded-circle mx-auto mb-2" src="cereal-ranked.jpg" width = "150" height = "100" alt="">
        </span>
  </a>
  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>
      <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <ul class="navbar-nav">
          <li class="nav-item">
          <a class="nav-link " href="#Aboutviz">About the Visualization</a>
          </li>
        <li class="nav-item">
 <a class="nav-link " href="#Overview" color="#6c757d" >Career Overview color: #6c757d</a>
          </li>
          <li class="nav-item">
            <a class="nav-link " href="#17-18">Liverpool 17-18</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#marketvalue">Market Value</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#Sources">Sources</a>
          </li>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#MoreInfo">More Info About Visualization</a>
        </li>



        </ul>
      </div>
    </nav>
<div class="container-fluid p-0">

      <section class="p-3 p-lg-5 d-flex d-column" id="Aboutviz">
        <div class="my-auto">
      <article>
        Hello everyone and welcome to my simple visualization. <br/>I have created a visualization that talks about the rise in prominence of the Egyptian soccer star
        Mohamed Salah.<br/>

        <h3> MAIN AIM: </h3> <p> To see how good salah's <strong>17-18</strong> season was and visualize his market value to understand how even ONE good season can significantly increase transfer value in football.  </p>
        <br/>
        <h3> Grading rubric </h3>
        I have included a list of sources that I referenced code from for this project.<br/>

        <h3> Hyprid Structure used: </h3> <br/>
        <h3> Triggers </h3> </br>
        <h3> Parameters </h3> </br>
        <h3> Annotations </h3>


      </br>


   <a class="button" href="#MoreInfo" font-size='100px'> MoreInfo </a>
      </article>
           <a class="button" href="#Overview" font-size='40px'> Next </a>
        </div>
      </section>

      <section class=" p-3 p-lg-5 d-flex d-column" id="Overview">
        <div class="my-auto">
          <h1 class="mb-0">Mohamed
            <span class="text-primary">Salah</span>
          </h1>
          <div class="info mb-5">Age: 26, Place of Birth: Nagrig, Egypt, Height: 5gt 9 in, Current Team: Liverppol, Number: 11
          </div>
            <svg id='svg-1' width="900" height="400" float="left" ></svg>

          <article>
            <h4> KEY TAKEAWAYS FROM GRAPH </h4>
            <ul>
              <li> Salah is a top goalscorer as he has scored in pretty much all competitions </li>
            <ul>
           </article>
        </div>
      </section>
         <a class="button" href="#17-18" font-size='40px'> Next </a>
         <br/>
         <br/>

      <section class=" p-3 p-lg-5 d-flex d-column" id="17-18">
        <div class="my-auto">
          <h2 class="mb-0">Liverpool 17-18 Season
          </h2>


          <svg id='svg-2' width='1000' height="400"float="left" ></svg>
          <svg id='svg-3' width='1000' height="400"float="left" display='none'></svg>
         <button class='button' onclick="showposition();" > Goals By Position </button>
         <button class='button' onclick="showcompetition();">Goals By Competition </button>
         <h4> KEY TAKEAWAYS </h4>
         <ul>
           <li> Plays at his best on forward right  </li>
         <ul>
        </div>
      </section>
         <a class="button" href="#marketvalue" font-size='40px'> Next </a>
         <br/>
         <br/>
      <section class=" p-3 p-lg-5 d-flex d-column" id="marketvalue">
        <div class="my-auto">
          <h2 class="mb-0">Market Value

          </h2>


            <svg id='svg-4' width='900' height="400"float="left"></svg>
            <h4> KEY TAKEAWAYS </h4>
            <ul>
              <li> The HIGHLIGHTED PART indicates how fast value can rise in football. </li>
	    <ul>

        </div>
      </section>
      <a class="button" href="#Sources" font-size='40px'> Next </a>
      <br/>
      <br/>

      <br/>
      <br/>
      <section class=" p-3 p-lg-5 d-flex d-column" id="Sources">
        <div class="my-auto">
          <h2 class="mb-0">SOURCES

          </h2>
            <ul>
              <li> https://startbootstrap.com/template-overviews/resume/ </li>

        </div>
      </section>
      <section class=" p-3 p-lg-5 d-flex d-column" id="MoreInfo">
        <div class="my-auto">
          <h2 class="mb-0">MoreInfo

          </h2>
            <p>This Presentation has 4 main slides and one about the visualization slide.</p>

        </div>
      </section>
      <a class="button" href="#Top" font-size='40px'> Return </a>
      <br/>
      <br/>


</div>



    </div>




    <script src="https://d3js.org/d3.v4.min.js"></script>


<script>


//set up chart
var bmargin = {top: 20, right: 20, bottom: 95, left: 50};
var bwidth = 800;
var bheight = 500;

var comp = d3.select(".comp")
				.attr("width", bwidth + bmargin.left + bmargin.right)
				.attr("height", bheight + bmargin.top + bmargin.bottom)
				.append("g")
				.attr("transform", "translate(" + bmargin.left + "," + bmargin.top + ")");

var bx = d3.scaleBand().rangeRound([0, bwidth]).paddingInner(0.1);
var by = d3.scaleLinear().rangeRound([bheight, 0]);

var xAxis = d3.axisBottom(bx);
var yAxis = d3.axisLeft(by);
	comp.append("g").attr("class", "y axis").call(yAxis)




comp.append("text").attr("transform", "translate(" + (bwidth/2) + "," + (bheight + bmargin.bottom - 5) + ")").text("player-names");



comp.append("text").attr("transform", "translate(-35," +  (bheight+bmargin.bottom)/2 + ") rotate(-90)").text("goals");
comp.append("g").attr("class", "xAxis").attr("transform", "translate(0," + bheight + ")").call(xAxis).selectAll("text").style("text-anchor", "end").attr("transform", function(d){
				return "rotate(-70)";
			});

// show the position graph
    function showposition(){
     var y = document.getElementById("svg-2")
     y.style.display="none"
     var z=document.getElementById("svg-3")
     z.style.display="block"


     }

// show the competition graph



     function showcompetition(){
       var y = document.getElementById("svg-2")
       y.style.display="block"
       var z=document.getElementById("svg-3")
       z.style.display="none"
     }


// declare the svgs
var svg1 = d3.select("#svg-1")  // salah summary svg
  var svg2=d3.select("#svg-2")  // salah position svg
      var svg3=d3.select('#svg-3') // salah competition svg
  var svg4=d3.select('#svg-4')// salah market value svg
  var margin = {top: 10, right: 30, bottom: 40, left: 70}
    var width = +svg1.attr("width") - margin.left - margin.right
  var height = +svg1.attr("height") - margin.top - margin.bottom
    var g1 = svg1.append("g").attr("transform", "translate(" + margin.left + "," + margin.top + ")");
  var g2=svg2.append("g").attr("transform", "translate(" + margin.left + "," + margin.top + ")");
  var g3=svg3.append("g").attr("transform", "translate(" + margin.left + "," + margin.top + ")");
  var  g4 = svg4.append("g").attr("transform", "translate(" + margin.left + "," + margin.top + ")");




  var parseTime = d3.timeParse("%d-%b-%y");
  var x = d3.scaleTime()
      .rangeRound([0, width]);
  var y1 = d3.scaleLinear()
      .rangeRound([height, 0]);
  var line = d3.line().x(function(d) { return x(d.Date); }).y(function(d) { return y1(d.Value); });
var x0 = d3.scaleBand().rangeRound([0, width]).paddingInner(0.1);
var x1 = d3.scaleBand().padding(0.05);
var y = d3.scaleLinear().rangeRound([height, 0]);
var z = d3.scaleOrdinal().range(["#FF0000","#FFA500", "#8a89a6","#0000FF","#4CBB17"]);
d3.csv("salahcareer.csv", function(d, i, columns) {
for (var i = 1, n = columns.length; i < n; ++i) d[columns[i]] = +d[columns[i]];
    return d;},
    function(error, data) {
        if (error) throw error;

      var keys = data.columns.slice(1); // takes columns from the 1st one
      //console.log(keys)

      x0.domain(data.map(function(d) { return d.Competition; }));
      x1.domain(keys).rangeRound([0, x0.bandwidth()]);
      y.domain([0, d3.max(data, function(d) { return d3.max(keys, function(key) { return d[key]; }); })]).nice();

      g1.append("g")
        .attr("class","chartclass")
        .selectAll("g")
        .data(data)
        .enter().append("g")
          .attr("transform", function(d) { return "translate(" + x0(d.Competition) + ",0)"; })
        .selectAll("rect")
        .data(function(d) { return keys.map(function(key) { return {key: key, value: d[key]}; }); })
        .enter().append("rect")
          .attr("x", function(d) { return x1(d.key); })
          .attr("y", function(d) { return y(d.value); })
          .attr("width", x1.bandwidth())
          .attr("height", function(d) { return height - y(d.value); })
          .attr("fill", function(d) { return z(d.key); });

      g1.append("g")
          .attr("class", "axis")
          .call(d3.axisBottom(x0))
          .attr("transform", "translate(0," + height + ")")
          .append("text")
          .attr("x",2)
          .attr("y",0)
          .attr("fill","#000")
          .attr("font-weight","bold")
          .attr("text-anchor","start")
          .text(function(d) {return d;});

      g1.append("g")
          .attr("class", "axis")
          .call(d3.axisLeft(y).ticks(null, "s"))
        .append("text")
          .attr("x", 2)
          .attr("y", y(y.ticks().pop()) + 0.5)
          .attr("dy", "0.32em")
          .attr("fill", "#000")
          .attr("font-weight", "bold")
          .attr("text-anchor", "start")
          .text("Count");

      var legend1 = g1.append("g")
          .attr("font-family", "Ariel")
          .attr("font-size", 10)
          .attr("text-anchor", "end")
        .selectAll("g")
        .data(keys.slice())
        .enter().append("g")
          .attr("transform", function(d, i) { return "translate(0," + i * 20 + ")"; });

      legend1.append("rect")
          .attr("x", width - 19)
          .attr("width", 19)
          .attr("height", 19)
          .attr("fill", z);

      legend1.append("text")
          .attr("x", width - 24)
          .attr("y", 9.5)
          .attr("dy", "0.32em")
          .text(function(d) { return d; });
    });


    d3.csv("salahbycompetition.csv", function(d, i, columns) {
      for (var i = 1, n = columns.length; i < n; ++i) d[columns[i]] = +d[columns[i]];
      return d;
    }, function(error, data) {
      if (error) throw error;

      var keys = data.columns.slice(1); // takes columns from the 1st one
      console.log(keys)

      x0.domain(data.map(function(d) { return d.Tournament; }));
      x1.domain(keys).rangeRound([0, x0.bandwidth()]);
      y.domain([0, d3.max(data, function(d) { return d3.max(keys, function(key) { return d[key]; }); })]).nice();

      g2.append("g")
        .selectAll("g")
        .data(data)
        .enter().append("g")
          .attr("transform", function(d) { return "translate(" + x0(d.Tournament) + ",0)"; })
        .selectAll("rect")
        .data(function(d) { return keys.map(function(key) { return {key: key, value: d[key]}; }); })
        .enter().append("rect")
          .attr("x", function(d) { return x1(d.key); })
          .attr("y", function(d) { return y(d.value); })
          .attr("width", x1.bandwidth())
          .attr("height", function(d) { return height - y(d.value); })
          .attr("fill", function(d) { return z(d.key); });

      g2.append("g")
          .attr("class", "axis")
          .call(d3.axisBottom(x0))
          .attr("transform", "translate(0," + height + ")")
          .append("text")
          .attr("x",2)
          .attr("y",0)
          .attr("fill","#000")
          .attr("font-weight","bold")
          .attr("text-anchor","start")
          .text(function(d) {return d;});

      g2.append("g")
          .attr("class", "axis")
          .call(d3.axisLeft(y).ticks(null, "s"))
        .append("text")
          .attr("x", 2)
          .attr("y", y(y.ticks().pop()) + 0.5)
          .attr("dy", "0.32em")
          .attr("fill", "#000")
          .attr("font-weight", "bold")
          .attr("text-anchor", "start")
          .text("Count");

      var legend2 = g2.append("g")
          .attr("font-family", "Ariel")
          .attr("font-size", 10)
          .attr("text-anchor", "end")
        .selectAll("g")
        .data(keys.slice())
        .enter().append("g")
          .attr("transform", function(d, i) { return "translate(0," + i * 20 + ")"; });

      legend2.append("rect")
          .attr("x", width - 19)
          .attr("width", 19)
          .attr("height", 19)
          .attr("fill", z);

      legend2.append("text")
          .attr("x", width - 24)
          .attr("y", 9.5)
          .attr("dy", "0.32em")
          .text(function(d) { return d; });
    });
    d3.csv("salahbyposition1.csv", function(d, i, columns) {
      for (var i = 1, n = columns.length; i < n; ++i) d[columns[i]] = +d[columns[i]];
      return d;
    }, function(error, data) {
      if (error) throw error;

      var keys = data.columns.slice(1); // takes columns from the 1st one
      console.log(keys)

      x0.domain(data.map(function(d) { return d.Position; }));
      x1.domain(keys).rangeRound([0, x0.bandwidth()]);
      y.domain([0, d3.max(data, function(d) { return d3.max(keys, function(key) { return d[key]; }); })]).nice();

      g3.append("g")
        .selectAll("g")
        .data(data)
        .enter().append("g")
          .attr("transform", function(d) { return "translate(" + x0(d.Position) + ",0)"; })
        .selectAll("rect")
        .data(function(d) { return keys.map(function(key) { return {key: key, value: d[key]}; }); })
        .enter().append("rect")
          .attr("x", function(d) { return x1(d.key); })
          .attr("y", function(d) { return y(d.value); })
          .attr("width", x1.bandwidth())
          .attr("height", function(d) { return height - y(d.value); })
          .attr("fill", function(d) { return z(d.key); });

      g3.append("g")
          .attr("class", "axis")
          .call(d3.axisBottom(x0))
          .attr("transform", "translate(0," + height + ")");

      g3.append("g")
          .attr("class", "axis")
          .call(d3.axisLeft(y).ticks(null, "s"))
        .append("text")
          .attr("x", 2)
          .attr("y", y(y.ticks().pop()) + 0.5)
          .attr("dy", "0.32em")
          .attr("fill", "#000")
          .attr("font-weight", "bold")
          .attr("text-anchor", "start")
          .text("Count");

      var legend3 = g3.append("g")
          .attr("font-family", "Ariel")
          .attr("font-size", 10)
          .attr("text-anchor", "end")
        .selectAll("g")
        .data(keys.slice())
        .enter().append("g")
          .attr("transform", function(d, i) { return "translate(0," + i * 20 + ")"; });

      legend3.append("rect")
          .attr("x", width - 19)
          .attr("width", 19)
          .attr("height", 19)
          .attr("fill", z);

      legend3.append("text")
          .attr("x", width - 24)
          .attr("y", 9.5)
          .attr("dy", "0.32em")
          .text(function(d) { return d; });
    });


    d3.csv("salahmarket.csv", function(d) {
      d.Date = parseTime(d.Date);
      d.Value = +d.Value;
      return d;
    }, function(error, data) {
      if (error) throw error;

      x.domain(d3.extent(data, function(d) { return d.Date; }));
      y1.domain(d3.extent(data, function(d) { return d.Value; }));
      console.log(y1)

      g4.append("g")
          .attr("transform", "translate(0," + height + ")")
          .call(d3.axisBottom(x))
        .select(".domain")
          .remove();

      g4.append("g")
          .call(d3.axisLeft(y1))
        .append("text")
          .attr("fill", "#000")
          .attr("transform", "rotate(-90)")
          .attr("y", 6)
          .attr("dy", "0.71em")
          .attr("text-anchor", "end")
          .text("Price (in pounds)");

      g4.append("path")
          .datum(data.filter(function(d){
            return d.Value>=10000000
          }))
          .attr("fill", "none")
          .attr("stroke", "steelblue")
          .attr("stroke-width", 4)
          .attr("d", line)
      g4.append("path")
              .datum(data.filter(function(d){
                return d.Value<=10000000
              }))
              .attr("fill", "none")
              .attr("stroke", "blue")
              .attr("stroke-width", 1.5)
              .attr("d", line)


    });

    </script>

  </body>

</html>
