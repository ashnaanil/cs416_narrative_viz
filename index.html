<!DOCTYPE html>
<html lang="en">
<head>
 <meta charset="utf-8">
 <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
 <meta name="description" content="Cereal Manufacturer analysis">
 <meta name="author" content="ashnaanil">
 <title> CS 416 Final Project (aanil2) </title>
 <link href="cereal.css" rel="stylesheet">
</head>

	
<body id="Top">
	
<nav class="navbar navbar-expand-lg navbar-dark bg-primary fixed-top" id="sideNav" color="#bd5d38">
        <span class="d-none d-lg-block">
          <img class="img-fluid img-profile rounded-circle mx-auto mb-2" src="cereal-ranked.jpg" width = "250" height = "200" alt="">
       </span>
<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
 <span class="navbar-toggler-icon"></span>
</button>
	<div class="collapse navbar-collapse" id="navbarSupportedContent">
	<ul class="navbar-nav" style="list-style: none;">
  		<li class="nav-item">
  			<a class="nav-link " href="#Overview">Overview</a>
  		</li>
  		<li class="nav-item">
   			<a class="nav-link " href="#Stats">Cereal Manufacturer Stats</a>
  		</li>
  		<li class="nav-item">
   			<a class="nav-link" href="#marketvalue">Market Value</a>
  		</li>
        </ul>
	</div>
  </nav>
	
	
<div class="container-fluid p-0">	
	
<div class="my-auto">
      <section class=" p-3 p-lg-5 d-flex d-column" id="Overview">
      	<h1 class="mb-0"> Overview </h1>
          <div class="info mb-5">
		  Vizualiation about factors such as average rating, calories, sugars etc... of cereals by cereal manufacturers.
          </div>
      <article>
            <h4> CEREAL MANUFACTURERS </h4>
            <ul>
		    <li> A = American Home Food Products </li>
		    <li> K = General Mills </li>
		    <li> N = Kelloggs </li>
		    <li> P = Nabisco </li>
		    <li> Q = Post </li>
		    <li> R = Quaker Oats </li>
		    <li> A = Ralston Purina </li>
            <ul>
      </article>
      <a class="button" href="#Stats" font-size='40px'> Next </a>
	<br/>
       <a class="button" href="#Top" font-size='40px'> Return </a>
      <br/>
      </section>
</div>
	      

<div class="my-auto">		
	<section class = "p-3 p-lg-5 d-flex d-column" id = "Stats">
	  <h2 class="mb-0">Cereal Manufacturer Statistics</h2>
            <svg id='svg-2' width='1000' height="400"float="left" ></svg>
            <svg id='svg-3' width='1000' height="400"float="left" display='none'></svg>
            <button class='button' onclick="showcalories();" > Manufacturer By Calories </button>
            <button class='button' onclick="showratings();">Manufacturer By Ratings </button>
            <h4> KEY TAKEAWAYS </h4>
            <ul>
              <li> Plays at his best on forward right  </li>
            <ul>
	    <a class="button" href="#marketvalue" font-size='40px'> Next </a>
        </section>
</div>

<div class="my-auto">
   <section class=" p-3 p-lg-5 d-flex d-column" id="marketvalue">
          <h2 class="mb-0">Market Value</h2>
            <svg id='svg-4' width='900' height="400"float="left"></svg>
            <h4> KEY TAKEAWAYS </h4>
            <ul>
              <li> The HIGHLIGHTED PART indicates how fast value can rise in football. </li>
	          <ul>
          <a class="button" href="#Sources" font-size='40px'> Next </a>
          <br/>
          <a class="button" href="#Top" font-size='40px'> Return </a>
	</section>
</div>

</div>

		
<script src="https://d3js.org/d3.v4.min.js"></script>	      
<script>
	
//set up chart
var bmargin = {top: 20, right: 20, bottom: 95, left: 50};
var bwidth = 800;
var bheight = 500;
var comp = d3.select(".comp")
				.attr("width", bwidth + bmargin.left + bmargin.right)
				.attr("height", bheight + bmargin.top + bmargin.bottom)
				.append("g")
				.attr("transform", "translate(" + bmargin.left + "," + bmargin.top + ")");
var bx = d3.scaleBand().rangeRound([0, bwidth]).paddingInner(0.1);
var by = d3.scaleLinear().rangeRound([bheight, 0]);
var xAxis = d3.axisBottom(bx);
var yAxis = d3.axisLeft(by);
	comp.append("g").attr("class", "y axis").call(yAxis)
comp.append("text").attr("transform", "translate(" + (bwidth/2) + "," + (bheight + bmargin.bottom - 5) + ")").text("player-names");
comp.append("text").attr("transform", "translate(-35," +  (bheight+bmargin.bottom)/2 + ") rotate(-90)").text("goals");
comp.append("g").attr("class", "xAxis").attr("transform", "translate(0," + bheight + ")").call(xAxis).selectAll("text").style("text-anchor", "end").attr("transform", function(d){
				return "rotate(-70)";
			});

// show the position graph
    function showratings(){
     var y = document.getElementById("svg-2")
     y.style.display="none"
     var z=document.getElementById("svg-3")
     z.style.display="block"


     }

// show the competition graph
     function showcalories(){
       var y = document.getElementById("svg-2")
       y.style.display="block"
       var z=document.getElementById("svg-3")
       z.style.display="none"
     }


// declare the svgs
var svg1 = d3.select("#svg-2")  // salah summary svg
  var svg2 = d3.select("#svg-2")  // salah position svg
  var svg3 = d3.select('#svg-3') // salah competition svg
  var svg4 = d3.select('#svg-4')// salah market value svg
  var margin = {top: 10, right: 30, bottom: 40, left: 70}
  var width = +svg1.attr("width") - margin.left - margin.right
  var height = +svg1.attr("height") - margin.top - margin.bottom
  var g1 = svg1.append("g").attr("transform", "translate(" + margin.left + "," + margin.top + ")");
  var g2 = svg2.append("g").attr("transform", "translate(" + margin.left + "," + margin.top + ")");
  var g3 = svg3.append("g").attr("transform", "translate(" + margin.left + "," + margin.top + ")");
  var g4 = svg4.append("g").attr("transform", "translate(" + margin.left + "," + margin.top + ")");




  var parseTime = d3.timeParse("%d-%b-%y");
  var x = d3.scaleTime()
      .rangeRound([0, width]);
  var y1 = d3.scaleLinear()
      .rangeRound([height, 0]);
  var line = d3.line().x(function(d) { return x(d.Date); }).y(function(d) { return y1(d.Value); });
var x0 = d3.scaleBand().rangeRound([0, width]).paddingInner(0.1);
var x1 = d3.scaleBand().padding(0.05);
var y = d3.scaleLinear().rangeRound([height, 0]);
var z = d3.scaleOrdinal().range(["#FF0000","#FFA500", "#8a89a6","#0000FF","#4CBB17"]);


	
	
d3.csv("cereal.csv", function(d) {
    return d;
},
    function(error, data) {
        if (error) throw error;
	
      var topData = data.sort(function(a, b) {
          return d3.descending(+a.name, +b.name);
       }).slice(0, 10);//top 10 here
	
     var p = d3.select("body").selectAll("p")
      .data(topData)
      .enter()
      .append("p")
      .text(function(d){
        return d.name;
      });
	
    });


    d3.csv("cereal.csv", function(d) {
      return d;
    }, function(error, data) {
      if (error) throw error;


      x0.domain(data.map(function(d) { return d.mfr; }));
      y.domain([0, 200]);

      g2.append("g")
	 .selectAll(".bar")
	    .data(data)
	    .enter()
	    .append("rect")
	    .attr("class", "bar")
	    .attr("x", function(d) { return x0(d.mfr); })
	    .attr("y", function(d) { return y(d.calories); })
	    .attr("width", x0.bandwidth())
	    .attr("height", function(d) { return height - y(d.calories); });   
	    
	    
      g2.append("g")
          .attr("class", "axis")
          .call(d3.axisBottom(x0))
          .attr("transform", "translate(0," + height + ")")
          .append("text")
          .attr("x",2)
          .attr("y",0)
          .attr("fill","#000")
          .attr("font-weight","bold")
          .attr("text-anchor","start")
          .text("Mfr Name");

      g2.append("g")
          .attr("class", "axis")
          .call(d3.axisLeft(y).ticks(null, "s"))
        .append("text")
          .attr("x", 2)
          .attr("y", y(y.ticks().pop()) + 0.5)
          .attr("dy", "0.32em")
          .attr("fill", "#000")
          .attr("font-weight", "bold")
          .attr("text-anchor", "start")
          .text("Calories");
    });
	
	
    d3.csv("cereal.csv", function(d) {
      return d;
    }, function(error, data) {
      if (error) throw error;


      x0.domain(data.map(function(d) { return d.mfr; }));
      y.domain([0, 100]);

      g3.append("g")
	 .selectAll(".bar")
	    .data(data)
	    .enter()
	    .append("rect")
	    .attr("class", "bar")
	    .attr("x", function(d) { return x0(d.mfr); })
	    .attr("y", function(d) { return y(d.rating); })
	    .attr("width", x0.bandwidth())
	    .attr("height", function(d) { return height - y(d.rating); });   
	    
	    
      g3.append("g")
          .attr("class", "axis")
          .call(d3.axisBottom(x0))
          .attr("transform", "translate(0," + height + ")")
          .append("text")
          .attr("x",2)
          .attr("y",0)
          .attr("fill","#000")
          .attr("font-weight","bold")
          .attr("text-anchor","start")
          .text("Mfr Name");

      g3.append("g")
          .attr("class", "axis")
          .call(d3.axisLeft(y).ticks(null, "s"))
        .append("text")
          .attr("x", 2)
          .attr("y", y(y.ticks().pop()) + 0.5)
          .attr("dy", "0.32em")
          .attr("fill", "#000")
          .attr("font-weight", "bold")
          .attr("text-anchor", "start")
          .text("Ratings");
    });
	


    d3.csv("salahmarket.csv", function(d) {
      d.Date = parseTime(d.Date);
      d.Value = +d.Value;
      return d;
    }, function(error, data) {
      if (error) throw error;

      x.domain(d3.extent(data, function(d) { return d.Date; }));
      y1.domain(d3.extent(data, function(d) { return d.Value; }));
      console.log(y1)

      g4.append("g")
          .attr("transform", "translate(0," + height + ")")
          .call(d3.axisBottom(x))
        .select(".domain")
          .remove();

      g4.append("g")
          .call(d3.axisLeft(y1))
        .append("text")
          .attr("fill", "#000")
          .attr("transform", "rotate(-90)")
          .attr("y", 6)
          .attr("dy", "0.71em")
          .attr("text-anchor", "end")
          .text("Price (in pounds)");

      g4.append("path")
          .datum(data.filter(function(d){
            return d.Value>=10000000
          }))
          .attr("fill", "none")
          .attr("stroke", "steelblue")
          .attr("stroke-width", 4)
          .attr("d", line)
      g4.append("path")
              .datum(data.filter(function(d){
                return d.Value<=10000000
              }))
              .attr("fill", "none")
              .attr("stroke", "blue")
              .attr("stroke-width", 1.5)
              .attr("d", line)


    });

    </script>

  </body>

</html>

